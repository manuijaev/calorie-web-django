{% extends 'base.html' %}
{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">

  <!-- Left: Form -->
  <div class="md:col-span-1 bg-white p-6 rounded-lg shadow">
    <h2 class="text-xl font-semibold mb-4">Add Food</h2>
    <form method="post" novalidate>
      {% csrf_token %}
      <div class="space-y-3">
        {{ form.name.label_tag }}
        {{ form.name }}
        {{ form.calories.label_tag }}
        {{ form.calories }}
        <div class="flex items-center space-x-2">
          <button type="submit" class="px-4 py-2 bg-slate-800 text-white rounded-md">Add</button>
          <form method="post" action="{% url 'calorie_tracker:reset_items' %}">
            {% csrf_token %}
            <button type="submit" class="px-3 py-2 bg-red-500 text-white rounded-md">Reset</button>
          </form>
        </div>
      </div>
    </form>
  </div>

  <!-- Right: List -->
  <div class="md:col-span-2 bg-white p-6 rounded-lg shadow">
    <div class="flex justify-between items-center">
      <h2 class="text-xl font-semibold">Today's Foods</h2>
      <div class="text-sm text-slate-600">Total: <span class="font-bold">{{ total_calories }}</span> kcal</div>
    </div>
    <ul class="mt-4 divide-y">
      {% for item in items %}
      <li class="py-3 flex justify-between items-center">
        <div>
          <div class="font-medium">{{ item.name }}</div>
          <div class="text-sm text-slate-500">{{ item.calories }} kcal â€¢ {{ item.created_at|date:"M d, Y H:i" }}</div>
        </div>
        <form method="post" action="{% url 'calorie_tracker:delete_item' item.pk %}">
          {% csrf_token %}
          <button type="submit" class="px-3 py-1 bg-rose-500 text-white rounded-md">Delete</button>
        </form>
      </li>
      {% empty %}
      <li class="py-6 text-center text-slate-500">No food items yet. Add your first one!</li>
      {% endfor %}
    </ul>
  </div>

</div>
{% endblock %}
